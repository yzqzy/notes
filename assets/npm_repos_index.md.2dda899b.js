import{_ as s,o as a,c as n,Q as l}from"./chunks/framework.9bc09dc8.js";const g=JSON.parse('{"title":"NPM 私服","description":"","frontmatter":{},"headers":[],"relativePath":"npm/repos/index.md","filePath":"npm/repos/index.md"}'),p={name:"npm/repos/index.md"},o=l(`<h1 id="npm-私服" tabindex="-1">NPM 私服 <a class="header-anchor" href="#npm-私服" aria-label="Permalink to &quot;NPM 私服&quot;">​</a></h1><h2 id="nexus" tabindex="-1">nexus <a class="header-anchor" href="#nexus" aria-label="Permalink to &quot;nexus&quot;">​</a></h2><p><strong>安装</strong></p><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">mkdir </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">data</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nexus</span></span>
<span class="line"><span style="color:#E1E4E8;">chown </span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">R</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">200</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">data</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nexus</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">mkdir </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">data</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nexus</span></span>
<span class="line"><span style="color:#24292E;">chown </span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">R</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">200</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">data</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nexus</span></span></code></pre></div><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">docker search nexus</span></span>
<span class="line"><span style="color:#E1E4E8;">docker pull sonatype</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nexus3</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">docker search nexus</span></span>
<span class="line"><span style="color:#24292E;">docker pull sonatype</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nexus3</span></span></code></pre></div><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">docker run </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">d </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">p </span><span style="color:#79B8FF;">4873</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">8081</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">name nexus </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">e </span><span style="color:#79B8FF;">NEXUS_CONTEXT</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">nexus </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">v </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">data</span><span style="color:#F97583;">/</span><span style="color:#B392F0;">nexus</span><span style="color:#E1E4E8;">:</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nexus</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">data </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">v </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">etc</span><span style="color:#F97583;">/</span><span style="color:#B392F0;">localtime</span><span style="color:#E1E4E8;">:</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">etc</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">localtime </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">restart</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">always sonatype</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nexus3</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">docker run </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">d </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">p </span><span style="color:#005CC5;">4873</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">8081</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">name nexus </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">e </span><span style="color:#005CC5;">NEXUS_CONTEXT</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">nexus </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">v </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">data</span><span style="color:#D73A49;">/</span><span style="color:#6F42C1;">nexus</span><span style="color:#24292E;">:</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nexus</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">data </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">v </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">etc</span><span style="color:#D73A49;">/</span><span style="color:#6F42C1;">localtime</span><span style="color:#24292E;">:</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">etc</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">localtime </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">restart</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">always sonatype</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nexus3</span></span></code></pre></div><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">docker run </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">d \\</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">p </span><span style="color:#79B8FF;">4873</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">8081</span><span style="color:#E1E4E8;"> \\</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">name nexus \\</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">e </span><span style="color:#79B8FF;">NEXUS_CONTEXT</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">nexus \\</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">v </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">data</span><span style="color:#F97583;">/</span><span style="color:#B392F0;">nexus</span><span style="color:#E1E4E8;">:</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nexus</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">data \\ </span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">v </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">etc</span><span style="color:#F97583;">/</span><span style="color:#B392F0;">localtime</span><span style="color:#E1E4E8;">:</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">etc</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">localtime \\</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">restart</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">always \\</span></span>
<span class="line"><span style="color:#E1E4E8;">  sonatype</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nexus3</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">docker run </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">d \\</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">p </span><span style="color:#005CC5;">4873</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">8081</span><span style="color:#24292E;"> \\</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">name nexus \\</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">e </span><span style="color:#005CC5;">NEXUS_CONTEXT</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">nexus \\</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">v </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">data</span><span style="color:#D73A49;">/</span><span style="color:#6F42C1;">nexus</span><span style="color:#24292E;">:</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nexus</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">data \\ </span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">v </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">etc</span><span style="color:#D73A49;">/</span><span style="color:#6F42C1;">localtime</span><span style="color:#24292E;">:</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">etc</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">localtime \\</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">restart</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">always \\</span></span>
<span class="line"><span style="color:#24292E;">  sonatype</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nexus3</span></span></code></pre></div><blockquote><p>--restart=always 跟随 docker 一起启动</p></blockquote><p><strong>登录</strong></p><p><code>http://xxxx/nexus/</code> 地址访问</p><p>用户名：admin，密码在 data/nexus/admin.password 文件中。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">cat </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">data</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nexus</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">admin.password</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">cat </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">data</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nexus</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">admin.password</span></span></code></pre></div><p><strong>仓库配置</strong></p><p>create repos</p><ul><li>npm proxy</li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">npm</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">taobao </span><span style="color:#B392F0;">https</span><span style="color:#E1E4E8;">:</span><span style="color:#6A737D;">//registry.npm.taobao.org/</span></span>
<span class="line"><span style="color:#E1E4E8;">npm</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">npmjs  </span><span style="color:#B392F0;">https</span><span style="color:#E1E4E8;">:</span><span style="color:#6A737D;">//registry.npmjs.org</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">Negative Cache：</span><span style="color:#79B8FF;">43200</span><span style="color:#E1E4E8;"> （</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> 个月）</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">npm</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">taobao </span><span style="color:#6F42C1;">https</span><span style="color:#24292E;">:</span><span style="color:#6A737D;">//registry.npm.taobao.org/</span></span>
<span class="line"><span style="color:#24292E;">npm</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">npmjs  </span><span style="color:#6F42C1;">https</span><span style="color:#24292E;">:</span><span style="color:#6A737D;">//registry.npmjs.org</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">Negative Cache：</span><span style="color:#005CC5;">43200</span><span style="color:#24292E;"> （</span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> 个月）</span></span></code></pre></div><ul><li>npm hosted</li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">npm</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">hosted</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">Deployment policy：Allow redeploy</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">npm</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">hosted</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">Deployment policy：Allow redeploy</span></span></code></pre></div><ul><li>npm group</li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">npm</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">public</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">配置优先级：</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">npm</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">hosted</span></span>
<span class="line"><span style="color:#E1E4E8;">npm</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">taobao</span></span>
<span class="line"><span style="color:#E1E4E8;">npm</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">npmjs</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">npm</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">public</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">配置优先级：</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">npm</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">hosted</span></span>
<span class="line"><span style="color:#24292E;">npm</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">taobao</span></span>
<span class="line"><span style="color:#24292E;">npm</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">npmjs</span></span></code></pre></div><p><strong>安全配置</strong></p><p>Security：</p><p>Realms ，选中 npm Bearer Token Realm</p><p><strong>测试</strong></p><p>上传操作：</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">npm login –</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">registry</span><span style="color:#F97583;">=</span><span style="color:#B392F0;">https</span><span style="color:#E1E4E8;">:</span><span style="color:#6A737D;">//registry.yueluo.club/nexus/repository/npm-hosted/</span></span>
<span class="line"><span style="color:#E1E4E8;">npm publish –</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">registry</span><span style="color:#F97583;">=</span><span style="color:#B392F0;">https</span><span style="color:#E1E4E8;">:</span><span style="color:#6A737D;">//registry.yueluo.club/nexus/repository/npm-hosted/</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">npm login –</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">registry</span><span style="color:#D73A49;">=</span><span style="color:#6F42C1;">https</span><span style="color:#24292E;">:</span><span style="color:#6A737D;">//registry.yueluo.club/nexus/repository/npm-hosted/</span></span>
<span class="line"><span style="color:#24292E;">npm publish –</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">registry</span><span style="color:#D73A49;">=</span><span style="color:#6F42C1;">https</span><span style="color:#24292E;">:</span><span style="color:#6A737D;">//registry.yueluo.club/nexus/repository/npm-hosted/</span></span></code></pre></div><p>使用仓库</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">nrm add yueluo </span><span style="color:#B392F0;">https</span><span style="color:#E1E4E8;">:</span><span style="color:#6A737D;">//registry.yueluo.club/nexus/repository/npm-public/</span></span>
<span class="line"><span style="color:#E1E4E8;">nrm use yueluo</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">nrm add yueluo </span><span style="color:#6F42C1;">https</span><span style="color:#24292E;">:</span><span style="color:#6A737D;">//registry.yueluo.club/nexus/repository/npm-public/</span></span>
<span class="line"><span style="color:#24292E;">nrm use yueluo</span></span></code></pre></div><h2 id="verdaccio-docker" tabindex="-1">verdaccio docker <a class="header-anchor" href="#verdaccio-docker" aria-label="Permalink to &quot;verdaccio docker&quot;">​</a></h2><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">docker pull verdaccio</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">verdaccio</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">docker pull verdaccio</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">verdaccio</span></span></code></pre></div><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">mkdir </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">data</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">verdaccio</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">conf</span></span>
<span class="line"><span style="color:#E1E4E8;">touch confg.yaml</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">mkdir </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">data</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">verdaccio</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">conf</span></span>
<span class="line"><span style="color:#24292E;">touch confg.yaml</span></span></code></pre></div><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># /data/verdaccio/conf/confg.yaml</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D;">storage</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">../storage</span></span>
<span class="line"><span style="color:#85E89D;">plugins</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">../plugins</span></span>
<span class="line"><span style="color:#85E89D;">auth</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">htpasswd</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">file</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">./htpasswd</span></span>
<span class="line"><span style="color:#85E89D;">uplinks</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">npmjs</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">url</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">https://registry.npmjs.org/</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">taobao</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">url</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">https://registry.npm.taobao.org/</span></span>
<span class="line"><span style="color:#85E89D;">packages</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">&quot;@*/*&quot;</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">access</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">$all</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">publish</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">$authenticated</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">proxy</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">taobao</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">&quot;**&quot;</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">access</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">$all</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">proxy</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">taobao</span></span>
<span class="line"><span style="color:#85E89D;">logs</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - { </span><span style="color:#85E89D;">type</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">stdout</span><span style="color:#E1E4E8;">, </span><span style="color:#85E89D;">format</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">pretty</span><span style="color:#E1E4E8;">, </span><span style="color:#85E89D;">level</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">http</span><span style="color:#E1E4E8;"> }</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># /data/verdaccio/conf/confg.yaml</span></span>
<span class="line"></span>
<span class="line"><span style="color:#22863A;">storage</span><span style="color:#24292E;">: </span><span style="color:#032F62;">../storage</span></span>
<span class="line"><span style="color:#22863A;">plugins</span><span style="color:#24292E;">: </span><span style="color:#032F62;">../plugins</span></span>
<span class="line"><span style="color:#22863A;">auth</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">htpasswd</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">file</span><span style="color:#24292E;">: </span><span style="color:#032F62;">./htpasswd</span></span>
<span class="line"><span style="color:#22863A;">uplinks</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">npmjs</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">url</span><span style="color:#24292E;">: </span><span style="color:#032F62;">https://registry.npmjs.org/</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">taobao</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">url</span><span style="color:#24292E;">: </span><span style="color:#032F62;">https://registry.npm.taobao.org/</span></span>
<span class="line"><span style="color:#22863A;">packages</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">&quot;@*/*&quot;</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">access</span><span style="color:#24292E;">: </span><span style="color:#032F62;">$all</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">publish</span><span style="color:#24292E;">: </span><span style="color:#032F62;">$authenticated</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">proxy</span><span style="color:#24292E;">: </span><span style="color:#032F62;">taobao</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">&quot;**&quot;</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">access</span><span style="color:#24292E;">: </span><span style="color:#032F62;">$all</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">proxy</span><span style="color:#24292E;">: </span><span style="color:#032F62;">taobao</span></span>
<span class="line"><span style="color:#22863A;">logs</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - { </span><span style="color:#22863A;">type</span><span style="color:#24292E;">: </span><span style="color:#032F62;">stdout</span><span style="color:#24292E;">, </span><span style="color:#22863A;">format</span><span style="color:#24292E;">: </span><span style="color:#032F62;">pretty</span><span style="color:#24292E;">, </span><span style="color:#22863A;">level</span><span style="color:#24292E;">: </span><span style="color:#032F62;">http</span><span style="color:#24292E;"> }</span></span></code></pre></div><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">docker run </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">d \\</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">name verdaccio \\</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">p </span><span style="color:#79B8FF;">4873</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">4873</span><span style="color:#E1E4E8;"> \\</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">v </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">data</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">verdaccio</span><span style="color:#F97583;">/</span><span style="color:#B392F0;">conf</span><span style="color:#E1E4E8;">:</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">verdaccio</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">conf \\</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">v </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">data</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">verdaccio</span><span style="color:#F97583;">/</span><span style="color:#B392F0;">storage</span><span style="color:#E1E4E8;">:</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">verdaccio</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">storage \\</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">v </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">data</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">verdaccio</span><span style="color:#F97583;">/</span><span style="color:#B392F0;">plugins</span><span style="color:#E1E4E8;">:</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">verdaccio</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">plugins \\</span></span>
<span class="line"><span style="color:#E1E4E8;">  verdaccio</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">verdaccio</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">docker run </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">d \\</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">name verdaccio \\</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">p </span><span style="color:#005CC5;">4873</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">4873</span><span style="color:#24292E;"> \\</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">v </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">data</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">verdaccio</span><span style="color:#D73A49;">/</span><span style="color:#6F42C1;">conf</span><span style="color:#24292E;">:</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">verdaccio</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">conf \\</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">v </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">data</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">verdaccio</span><span style="color:#D73A49;">/</span><span style="color:#6F42C1;">storage</span><span style="color:#24292E;">:</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">verdaccio</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">storage \\</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">v </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">data</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">verdaccio</span><span style="color:#D73A49;">/</span><span style="color:#6F42C1;">plugins</span><span style="color:#24292E;">:</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">verdaccio</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">plugins \\</span></span>
<span class="line"><span style="color:#24292E;">  verdaccio</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">verdaccio</span></span></code></pre></div><h2 id="verdaccio-pm2" tabindex="-1">verdaccio pm2 <a class="header-anchor" href="#verdaccio-pm2" aria-label="Permalink to &quot;verdaccio pm2&quot;">​</a></h2><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">npm install </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">g verdaccio</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">npm install </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">g verdaccio</span></span></code></pre></div><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">usr</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">node</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">node</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">v14.</span><span style="color:#79B8FF;">8.0</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">linux</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">x64</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">bin</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">verdaccio</span></span>
<span class="line"><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">usr</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">node</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">node</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">v14.</span><span style="color:#79B8FF;">8.0</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">linux</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">x64</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">lib</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">node_modules</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">verdaccio</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">bin</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">verdaccio</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">/</span><span style="color:#24292E;">usr</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">node</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">node</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">v14.</span><span style="color:#005CC5;">8.0</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">linux</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">x64</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">bin</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">verdaccio</span></span>
<span class="line"><span style="color:#D73A49;">/</span><span style="color:#24292E;">usr</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">node</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">node</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">v14.</span><span style="color:#005CC5;">8.0</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">linux</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">x64</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">lib</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">node_modules</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">verdaccio</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">bin</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">verdaccio</span></span></code></pre></div><p><strong>建立软连接</strong></p><p><strong>安装</strong></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">ln </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">s </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">usr</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">node</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">node</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">v14.</span><span style="color:#79B8FF;">8.0</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">linux</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">x64</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">bin</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">verdaccio </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">usr</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">local</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">bin</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">verdaccio</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">ln </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">s </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">usr</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">node</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">node</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">v14.</span><span style="color:#005CC5;">8.0</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">linux</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">x64</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">bin</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">verdaccio </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">usr</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">local</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">bin</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">verdaccio</span></span></code></pre></div><p>任意目录执行 verdaccio 命令，可以启动 verdaccio。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">root</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">.config</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">verdaccio</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#032F62;">/root/</span><span style="color:#24292E;">.config</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">verdaccio</span></span></code></pre></div><p><strong>修改配置文件</strong></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">mkdir </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">data</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">verdaccio </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">data</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">verdaccio</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">conf </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">data</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">verdaccio</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">storage </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">data</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">verdaccio</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">plugins</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">mkdir </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">data</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">verdaccio </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">data</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">verdaccio</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">conf </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">data</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">verdaccio</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">storage </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">data</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">verdaccio</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">plugins</span></span></code></pre></div><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark has-diff vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#</span></span>
<span class="line"><span style="color:#6A737D;"># This is the default config file. It allows all users to do anything,</span></span>
<span class="line"><span style="color:#6A737D;"># so don&#39;t use it on production systems.</span></span>
<span class="line"><span style="color:#6A737D;">#</span></span>
<span class="line"><span style="color:#6A737D;"># Look here for more config file examples:</span></span>
<span class="line"><span style="color:#6A737D;"># https://github.com/verdaccio/verdaccio/tree/master/conf</span></span>
<span class="line"><span style="color:#6A737D;">#</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># path to a directory with all packages</span></span>
<span class="line"><span style="color:#85E89D;">storage</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">/data/verdaccio/storage</span></span>
<span class="line"><span style="color:#6A737D;"># path to a directory with plugins to include</span></span>
<span class="line"><span style="color:#85E89D;">plugins</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">/data/verdaccio/plugins</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D;">web</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">title</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Verdaccio</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># comment out to disable gravatar support</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># gravatar: false</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># by default packages are ordercer ascendant (asc|desc)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># sort_packages: asc</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># convert your UI to the dark side</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># darkMode: true</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># logo: http://somedomain/somelogo.png</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># favicon: http://somedomain/favicon.ico | /path/favicon.ico</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># translate your registry, api i18n not available yet</span></span>
<span class="line"><span style="color:#6A737D;"># i18n:</span></span>
<span class="line"><span style="color:#6A737D;"># list of the available translations https://github.com/verdaccio/ui/tree/master/i18n/translations</span></span>
<span class="line"><span style="color:#85E89D;">il8n</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#85E89D;">web</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">zh-CN</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D;">auth</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">htpasswd</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">file</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">/data/verdaccio/conf/htpasswd</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># Maximum amount of users allowed to register, defaults to &quot;+inf&quot;.</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># You can set this to -1 to disable registration.</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># max_users: 1000</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># a list of other known repositories we can talk to</span></span>
<span class="line"><span style="color:#85E89D;">uplinks</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">npmjs</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">url</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">https://registry.npmjs.org/</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">taobao</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">url</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">https://registry.npm.taobao.org/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D;">packages</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">&#39;@*/*&#39;</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># scoped packages</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">access</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">$all</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">publish</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">$authenticated</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">unpublish</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">$authenticated</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">proxy</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">taobao</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">&#39;**&#39;</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># allow all users (including non-authenticated users) to read and</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># publish all packages</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">#</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># you can specify usernames/groupnames (depending on your auth plugin)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># and three keywords: &quot;$all&quot;, &quot;$anonymous&quot;, &quot;$authenticated&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">access</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">$all</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># allow all known users to publish/publish packages</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># (anyone can register by default, remember?)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">publish</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">$authenticated</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">unpublish</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">$authenticated</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># if package is not available locally, proxy requests to &#39;npmjs&#39; registry</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">proxy</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">taobao</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># You can specify HTTP/1.1 server keep alive timeout in seconds for incoming connections.</span></span>
<span class="line"><span style="color:#6A737D;"># A value of 0 makes the http server behave similarly to Node.js versions prior to 8.0.0, which did not have a keep-alive timeout.</span></span>
<span class="line"><span style="color:#6A737D;"># WORKAROUND: Through given configuration you can workaround following issue https://github.com/verdaccio/verdaccio/issues/301. Set to 0 in case 60 is not enough.</span></span>
<span class="line"><span style="color:#85E89D;">server</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">keepAliveTimeout</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">60</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D;">middlewares</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">audit</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">enabled</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># log settings</span></span>
<span class="line"><span style="color:#85E89D;">logs</span><span style="color:#E1E4E8;">: { </span><span style="color:#85E89D;">type</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">stdout</span><span style="color:#E1E4E8;">, </span><span style="color:#85E89D;">format</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">pretty</span><span style="color:#E1E4E8;">, </span><span style="color:#85E89D;">level</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">http</span><span style="color:#E1E4E8;"> }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#experiments:</span></span>
<span class="line"><span style="color:#6A737D;">#  # support for npm token command</span></span>
<span class="line"><span style="color:#6A737D;">#  token: false</span></span>
<span class="line"><span style="color:#6A737D;">#  # disable writing body size to logs, read more on ticket 1912</span></span>
<span class="line"><span style="color:#6A737D;">#  bytesin_off: false</span></span>
<span class="line"><span style="color:#6A737D;">#  # enable tarball URL redirect for hosting tarball with a different server, the tarball_url_redirect can be a template string</span></span>
<span class="line"><span style="color:#6A737D;">#  tarball_url_redirect: &#39;https://mycdn.com/verdaccio/\${packageName}/\${filename}&#39;</span></span>
<span class="line"><span style="color:#6A737D;">#  # the tarball_url_redirect can be a function, takes packageName and filename and returns the url, when working with a js configuration file</span></span>
<span class="line"><span style="color:#6A737D;">#  tarball_url_redirect(packageName, filename) {</span></span>
<span class="line"><span style="color:#6A737D;">#    const signedUrl = // generate a signed url</span></span>
<span class="line"><span style="color:#6A737D;">#    return signedUrl;</span></span>
<span class="line"><span style="color:#6A737D;">#  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># This affect the web and api (not developed yet)</span></span>
<span class="line"><span style="color:#6A737D;">#i18n:</span></span>
<span class="line"><span style="color:#6A737D;">#web: en-US</span></span></code></pre><pre class="shiki github-light has-diff vp-code-light"><code><span class="line"><span style="color:#6A737D;">#</span></span>
<span class="line"><span style="color:#6A737D;"># This is the default config file. It allows all users to do anything,</span></span>
<span class="line"><span style="color:#6A737D;"># so don&#39;t use it on production systems.</span></span>
<span class="line"><span style="color:#6A737D;">#</span></span>
<span class="line"><span style="color:#6A737D;"># Look here for more config file examples:</span></span>
<span class="line"><span style="color:#6A737D;"># https://github.com/verdaccio/verdaccio/tree/master/conf</span></span>
<span class="line"><span style="color:#6A737D;">#</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># path to a directory with all packages</span></span>
<span class="line"><span style="color:#22863A;">storage</span><span style="color:#24292E;">: </span><span style="color:#032F62;">/data/verdaccio/storage</span></span>
<span class="line"><span style="color:#6A737D;"># path to a directory with plugins to include</span></span>
<span class="line"><span style="color:#22863A;">plugins</span><span style="color:#24292E;">: </span><span style="color:#032F62;">/data/verdaccio/plugins</span></span>
<span class="line"></span>
<span class="line"><span style="color:#22863A;">web</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">title</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Verdaccio</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;"># comment out to disable gravatar support</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;"># gravatar: false</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;"># by default packages are ordercer ascendant (asc|desc)</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;"># sort_packages: asc</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;"># convert your UI to the dark side</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;"># darkMode: true</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;"># logo: http://somedomain/somelogo.png</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;"># favicon: http://somedomain/favicon.ico | /path/favicon.ico</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># translate your registry, api i18n not available yet</span></span>
<span class="line"><span style="color:#6A737D;"># i18n:</span></span>
<span class="line"><span style="color:#6A737D;"># list of the available translations https://github.com/verdaccio/ui/tree/master/i18n/translations</span></span>
<span class="line"><span style="color:#22863A;">il8n</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#22863A;">web</span><span style="color:#24292E;">: </span><span style="color:#032F62;">zh-CN</span></span>
<span class="line"></span>
<span class="line"><span style="color:#22863A;">auth</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">htpasswd</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">file</span><span style="color:#24292E;">: </span><span style="color:#032F62;">/data/verdaccio/conf/htpasswd</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;"># Maximum amount of users allowed to register, defaults to &quot;+inf&quot;.</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;"># You can set this to -1 to disable registration.</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;"># max_users: 1000</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># a list of other known repositories we can talk to</span></span>
<span class="line"><span style="color:#22863A;">uplinks</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">npmjs</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">url</span><span style="color:#24292E;">: </span><span style="color:#032F62;">https://registry.npmjs.org/</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">taobao</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">url</span><span style="color:#24292E;">: </span><span style="color:#032F62;">https://registry.npm.taobao.org/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#22863A;">packages</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">&#39;@*/*&#39;</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;"># scoped packages</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">access</span><span style="color:#24292E;">: </span><span style="color:#032F62;">$all</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">publish</span><span style="color:#24292E;">: </span><span style="color:#032F62;">$authenticated</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">unpublish</span><span style="color:#24292E;">: </span><span style="color:#032F62;">$authenticated</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">proxy</span><span style="color:#24292E;">: </span><span style="color:#032F62;">taobao</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">&#39;**&#39;</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;"># allow all users (including non-authenticated users) to read and</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;"># publish all packages</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">#</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;"># you can specify usernames/groupnames (depending on your auth plugin)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;"># and three keywords: &quot;$all&quot;, &quot;$anonymous&quot;, &quot;$authenticated&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">access</span><span style="color:#24292E;">: </span><span style="color:#032F62;">$all</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;"># allow all known users to publish/publish packages</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;"># (anyone can register by default, remember?)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">publish</span><span style="color:#24292E;">: </span><span style="color:#032F62;">$authenticated</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">unpublish</span><span style="color:#24292E;">: </span><span style="color:#032F62;">$authenticated</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;"># if package is not available locally, proxy requests to &#39;npmjs&#39; registry</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">proxy</span><span style="color:#24292E;">: </span><span style="color:#032F62;">taobao</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># You can specify HTTP/1.1 server keep alive timeout in seconds for incoming connections.</span></span>
<span class="line"><span style="color:#6A737D;"># A value of 0 makes the http server behave similarly to Node.js versions prior to 8.0.0, which did not have a keep-alive timeout.</span></span>
<span class="line"><span style="color:#6A737D;"># WORKAROUND: Through given configuration you can workaround following issue https://github.com/verdaccio/verdaccio/issues/301. Set to 0 in case 60 is not enough.</span></span>
<span class="line"><span style="color:#22863A;">server</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">keepAliveTimeout</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">60</span></span>
<span class="line"></span>
<span class="line"><span style="color:#22863A;">middlewares</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">audit</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">enabled</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># log settings</span></span>
<span class="line"><span style="color:#22863A;">logs</span><span style="color:#24292E;">: { </span><span style="color:#22863A;">type</span><span style="color:#24292E;">: </span><span style="color:#032F62;">stdout</span><span style="color:#24292E;">, </span><span style="color:#22863A;">format</span><span style="color:#24292E;">: </span><span style="color:#032F62;">pretty</span><span style="color:#24292E;">, </span><span style="color:#22863A;">level</span><span style="color:#24292E;">: </span><span style="color:#032F62;">http</span><span style="color:#24292E;"> }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#experiments:</span></span>
<span class="line"><span style="color:#6A737D;">#  # support for npm token command</span></span>
<span class="line"><span style="color:#6A737D;">#  token: false</span></span>
<span class="line"><span style="color:#6A737D;">#  # disable writing body size to logs, read more on ticket 1912</span></span>
<span class="line"><span style="color:#6A737D;">#  bytesin_off: false</span></span>
<span class="line"><span style="color:#6A737D;">#  # enable tarball URL redirect for hosting tarball with a different server, the tarball_url_redirect can be a template string</span></span>
<span class="line"><span style="color:#6A737D;">#  tarball_url_redirect: &#39;https://mycdn.com/verdaccio/\${packageName}/\${filename}&#39;</span></span>
<span class="line"><span style="color:#6A737D;">#  # the tarball_url_redirect can be a function, takes packageName and filename and returns the url, when working with a js configuration file</span></span>
<span class="line"><span style="color:#6A737D;">#  tarball_url_redirect(packageName, filename) {</span></span>
<span class="line"><span style="color:#6A737D;">#    const signedUrl = // generate a signed url</span></span>
<span class="line"><span style="color:#6A737D;">#    return signedUrl;</span></span>
<span class="line"><span style="color:#6A737D;">#  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># This affect the web and api (not developed yet)</span></span>
<span class="line"><span style="color:#6A737D;">#i18n:</span></span>
<span class="line"><span style="color:#6A737D;">#web: en-US</span></span></code></pre></div><p><strong>测试使用</strong></p><p>推荐本地使用 nrm。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">nrm add yueluo </span><span style="color:#B392F0;">https</span><span style="color:#E1E4E8;">:</span><span style="color:#6A737D;">//registry.yueluo.club/</span></span>
<span class="line"><span style="color:#E1E4E8;">nrm use yueluo</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">nrm add yueluo </span><span style="color:#6F42C1;">https</span><span style="color:#24292E;">:</span><span style="color:#6A737D;">//registry.yueluo.club/</span></span>
<span class="line"><span style="color:#24292E;">nrm use yueluo</span></span></code></pre></div><p>创建用户</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">npm adduser</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">npm adduser</span></span></code></pre></div><p>发布</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">npm publish</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">npm publish</span></span></code></pre></div><p><strong>pm2 启动</strong></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">pm2 start verdaccio </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">name</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;registry_service&quot;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">pm2 start verdaccio </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">name</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;registry_service&quot;</span></span></code></pre></div>`,53),e=[o];function c(t,r,y,E,i,d){return a(),n("div",null,e)}const h=s(p,[["render",c]]);export{g as __pageData,h as default};
